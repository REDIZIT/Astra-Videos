@top JsonText { value }

value { Identifier | Comment | Keyword | True | False | Null | Number | String | TypeName | Object | Array }

String[isolate] { string }
Object { "{" list<Property>? "}" }
Array  { "[" list<value>? "]" }

Property { PropertyName ":" value }
PropertyName[isolate] { string }


@tokens {
	Comment { "//" char* | "/*" (whitespace* char*)* "*/" }
	Keyword { "class" | "abstract" | "public" | "private" | "override" }
	ControlFlowKeyword {  "return" | "if" | "else" | "for" | "while" }

	True  { "true" }
	False { "false" }
	Null  { "null" }

	TypeName { " " ("string" | "int" | "float") }

	Number { '-'? int frac? exp?  }
	int  { '0' | $[1-9] @digit* }
	frac { '.' @digit+ }
	exp  { $[eE] $[+\-]? @digit+ }

	string { '"' char* '"' | '@"' (whitespace* char*)* '"'}
	char { $[\u{20}\u{21}\u{23}-\u{5b}\u{5d}-\u{10ffff}] | "\\" esc }
	esc  { $["\\\/bfnrt] | "u" hex hex hex hex }
	hex  { $[0-9a-fA-F] }

	whitespace { $[ \n\r\t] }

	Identifier { $[a-zA-Z_]}

	"{" "}" "[" "]" "," ":"
}

@skip { whitespace }
list<item> { item ("," item)* }

@external propSource jsonHighlighting from "./highlight"

@detectDelim